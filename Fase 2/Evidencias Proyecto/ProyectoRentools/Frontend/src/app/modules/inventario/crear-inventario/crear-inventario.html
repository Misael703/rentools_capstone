<div class="container mt-4 crear-inventario">
  <h2 class="form-title">Crear Nueva Herramienta</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="herramienta-form">

    <div class="row g-3">

      <!-- LADO IZQUIERDO -->
      <div class="col-md-4">

        <!-- PRODUCTO BSALE -->
        <div class="form-group select-wrapper">
          <label>Producto Bsale *</label>

          <div class="select-container">
            <select class="form-control" formControlName="product_id_bsale">
              <option value="" disabled>Seleccione el producto</option>
              <option *ngFor="let item of listaProductosBsale" [value]="item.product_id_bsale">
                {{ item.product_name }} (ID: {{ item.product_id_bsale }})
              </option>
            </select>

            <i class="bi bi-caret-down-fill select-icon"></i>
          </div>

          <div class="text-danger" *ngIf="campoInvalido('product_id_bsale')">
            Debes seleccionar un producto
          </div>
        </div>
        <!-- SKU -->
        <div class="form-group">
          <label>SKU Bsale *</label>
          <input type="text" formControlName="sku_bsale" class="form-control" placeholder="Ej: SKU123" />
          <div class="text-danger" *ngIf="campoInvalido('sku_bsale')">
            {{ mensajeError('sku_bsale') }}
          </div>
        </div>

        <!-- Precio Diario -->
        <div class="form-group">
          <label>Precio Diario</label>
          <input type="number" formControlName="precio_diario" class="form-control" />
          <div class="text-danger" *ngIf="campoInvalido('precio_diario')">
            {{ mensajeError('precio_diario') }}
          </div>
        </div>

        <!-- Garantía -->
        <div class="form-group">
          <label>Garantía</label>
          <input type="number" formControlName="garantia" class="form-control" />
          <div class="text-danger" *ngIf="campoInvalido('garantia')">
            {{ mensajeError('garantia') }}
          </div>
        </div>

        <!-- Días Mínimo -->
        <div class="form-group">
          <label>Días Mínimo</label>
          <input type="number" formControlName="dias_minimo" class="form-control" />
          <div class="text-danger" *ngIf="campoInvalido('dias_minimo')">
            {{ mensajeError('dias_minimo') }}
          </div>
        </div>

      </div>

      <!-- LADO DERECHO -->
      <div class="col-md-8">

        <!-- Nombre -->
        <div class="form-group">
          <label>Nombre *</label>
          <input type="text" formControlName="nombre" class="form-control" />
          <div class="text-danger" *ngIf="campoInvalido('nombre')">
            {{ mensajeError('nombre') }}
          </div>
        </div>

        <!-- Descripción -->
        <div class="form-group">
          <label>Descripción</label>
          <textarea formControlName="descripcion" class="form-control descripcion-textarea"></textarea>
        </div>

        <!-- Stock -->
        <div class="form-group">
          <label>Stock</label>
          <input type="number" formControlName="stock" class="form-control" />
          <div class="text-danger" *ngIf="campoInvalido('stock')">
            {{ mensajeError('stock') }}
          </div>
        </div>

      </div>
    </div>

    <!-- Botones -->
    <div class="botones-acciones mt-3">
      <button type="button" class="btn-cancelar" (click)="cancelar()">
        <i class="bi bi-arrow-left me-1"></i> Cancelar
      </button>
      <button type="submit" [disabled]="loading" class="btn-crear">
        <i class="bi bi-plus-lg me-1"></i>
        <span *ngIf="!loading">Crear</span>
        <span *ngIf="loading">Guardando...</span>
      </button>
    </div>
  </form>
</div>

<!-- Modal de éxito -->
<div *ngIf="mostrarMensaje" class="modal-exito">
  <div class="modal-contenido">
    <i class="bi bi-check-circle-fill icono-exito"></i>
    <p>Herramienta creada correctamente</p>
    <button class="btn-aceptar" (click)="cerrarMensaje()">Aceptar</button>
  </div>
</div>