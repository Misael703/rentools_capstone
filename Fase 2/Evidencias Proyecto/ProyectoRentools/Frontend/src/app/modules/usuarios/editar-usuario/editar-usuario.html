<div class="container editar-usuario-container">

  <!-- Título y botón volver -->
  <div class="header-bar">
    <h2 class="form-title">Editar Usuario</h2>
  </div>

  <!-- Formulario -->
  <form [formGroup]="form" (ngSubmit)="guardar()" class="usuario-form">

    <!-- Campo ID -->
    <div class="form-group">
      <label>ID Usuario</label>
      <input type="text" class="form-control" formControlName="id_usuario" readonly />
    </div>

    <!-- Nombre -->
    <div class="form-group">
      <label>Nombre</label>
      <input type="text" class="form-control" formControlName="nombre" />
      <div class="text-danger" *ngIf="form.get('nombre')?.touched && form.get('nombre')?.invalid">
        El nombre es obligatorio.
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email</label>
      <input type="email" class="form-control" formControlName="email" />
      <div class="text-danger" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
        <span *ngIf="form.get('email')?.errors?.['required']">El correo es obligatorio.</span>
        <span *ngIf="form.get('email')?.errors?.['email']">Correo inválido.</span>
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label>Password</label>
      <input type="password" class="form-control" formControlName="password" />
      <div class="text-danger" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
        Debe contener mínimo 6 caracteres.
      </div>
    </div>

    <!-- Rol -->
    <div class="form-group">
      <label>Rol</label>
      <select class="form-control" formControlName="id_rol">
        <option value="">Seleccione rol</option>
        <option *ngFor="let rol of roles" [value]="rol.id_rol">{{ rol.nombre }}</option>
      </select>
      <div class="text-danger" *ngIf="form.get('id_rol')?.touched && form.get('id_rol')?.invalid">
        Debe seleccionar un rol.
      </div>
    </div>

    <!-- Botones -->
    <div class="botones-acciones">
      <button type="button" class="btn-cancelar" (click)="cancelar()">Cancelar</button>

      <button type="submit" class="btn-guardar" [disabled]="form.invalid || loading">
        <i class="bi bi-pencil-square"></i> Guardar Cambios
      </button>
    </div>

  </form>

  <!-- Modal Confirmación -->
  <div *ngIf="mostrarMensaje" class="mensaje-confirmacion">
    <i class="bi bi-check-circle-fill check-icon"></i>
    <button class="btn-guardar" (click)="cerrarMensaje()">¡Usuario actualizado!</button>
  </div>

</div>